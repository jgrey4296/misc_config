# -*- mode: snippet -*-
# name  : expand-request
# uuid  : expand-request
# key   : expand-request
# group : url
# --
from time import sleep
import requests


def expander(current):
    # header = {'user-agent': args.agent}
    try:
        response = requests.head(current, allow_redirects=True, timeout=2, headers=header)
        if response.ok:
            expanded[current] = response.url
        else:
            expanded[current] = response.status_code

        return "{} |%| {}".format(current, args.separator, expanded[current])
    except Exception as err:
        cmd    = 'say -v Moira -r 50 "Error"'
        system(cmd)
        expanded[current] = f"400.1 : {str(err)}"
        logging.info("Error: %s", str(err))
